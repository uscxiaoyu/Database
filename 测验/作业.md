## 《Python数据库管理技术》期中练习

学号:

姓名:

### 一、数据定义
假设college中有以下关系模式集合:

student(<u>s_id</u>, s_name, gender, spe_id, birthday);<br>
course(<u>c_id</u>, c_name, dept_id, credit, hours);<br>
specialty(<u>spe_id</u>, spe_name, dept_id)<br>
teacher(<u>t_id</u>, t_name, dept_id, salary);<br>
department(<u>dept_id</u>, dept_name, fund, building, decription);<br>
stu_course(<u>s_id, c_id, t_id</u>, score);

请完成以下操作:

- (1) 创建college数据库。
- (2) 在该数据库中创建以上表，数据类型和长度自定，注意下划线标识的字段为主键。
> 表之间有以下参照关系: 1)student表中的spe_id参照department表中的spe_id; 2) course表中的dept_id参照department表中的dept_id; 3) specialty表中的dept_id参照department表中的dept_id; 3) teacher表中的dept_id参照department表中的dept_id; 4) stu_course表中的s_id参照student表中的s_id, c_id参照course表中的c_id, t_id参照teacher表中的t_id。*
- (3) 在teacher表中新增一个字段grade表示teacher的职位。
- (4) 删除department表中的description字段。
- (5) 在studen表中的dept_id上构建普通索引, 在department的fund字段上构建普通索引。

### 二、数据插入、更新与删除

在college数据库中继续进行以下操作:
- (1) 在dept表中插入以下记录<br>

student表

| s_id   | s_name   | gender   | spe_id   | birthday |
|----:|----:|----:|----:|----:| ----:|
| 20180201 | 黄庆 | 男 |  101  |  2000-10-1 |
| 20180210 | 张熊 | 男 |  101  |  2000-9-10 |
| 20180234 | 廖玲 | 女 |  101  |  2000-11-1 |
| 20180234 | 韩勇 | 男 |  201  |  1999-4-1 |

specialty表

| spe_id   | s_name   | dept_id |
|----: |----: |----:|
| 101 | 管理信息系统| 001 |
| 102 | 电子商务| 001 |
| 201 | 商务新闻| 002 |

department表

| dept_id   | dept_name   | fund |  building |
|----: |----: |----:|----:|
| 001 | 管理学院| 500000 | IS001|
| 002 | 人文学院| 100000 | IS002|

- (2) 更新department表的人文学院的fund：在原来的基础上再增加10000。
- (3) 删除department表中的人文学院记录行。

### 三、数据查询

> 导入mis.sql文件，创建数据库mis，然后完成以下查询任务

- (1) 查询所有获得奖学金的学生的学号、姓名、性别、出生年份、奖学金。

- (2) 查询所有获得一等奖学金的学生的所有信息，按出出生月份升序排序。

- (3) 请查询各专业获取的奖学金总额，剔除未获取奖学金的专业，最后结果返回专业和奖学金总额，并按奖学金总额排序。

- (4) 查询学生表中专业编号为01的姓王和李的同学名单， 要求显学号，姓名，性别和奖学金字段。

- (5) 查询学生表中各专业的奖学金平均值（别名为 奖学金均值）和各专业人数（别名为人数）。(**要求显示奖学金总额在2000元以上的专业名称和奖学金均值及各专业人数。**)
- (6) 查询专业为02， 04， 09和15四个专业中的05级学生信息，显示第4条记录到第8条记录。

- (7) 查询各位同学的平均分，返回学号, 学生姓名和平均成绩，按平均分从高到低排序，返回前10个记录。

- (8) 查询各门课程的不及格人数，返回课程号, 课程名称和不及格人数，按不及格人数从高到低排序，返回前10个记录。
