# 大作业(一)

## 一、数据定义(30分)

假设有以下关系模式集:

- 学生: student(<u>s_id</u>, s_name, gender, spe_id, birthday);
- 课程: course(<u>c_id</u>, c_name, dept_id, credit, hours);
- 专业: specialty(<u>spe_id</u>, spe_name, dept_id)
- 教师: teacher(<u>t_id</u>, t_name, dept_id, salary);
- 部门: department(<u>dept_id</u>, dept_name, fund, building, description);
- 选课: stu_course(<u>s_id, c_id, t_id</u>, score);

另外，请注意:

> - 下划线字段为主键
> - 表之间有以下参照关系:
> 1)`student`表中的`spe_id`参照`specialty`表中的`spe_id`;
> 2)`course`表中的`dept_id`参照`department`表中的`dept_id`; 
> 3)`specialty`表中的`dept_id`参照`department`表中的`dept_id`;
> 4)`teacher`表中的`dept_id`参照`department`表中的`dept_id`;
> 5)`stu_course`表中的`s_id`参照`student`表中的`s_id`,`c_id`参照`course`表中的`c_id`, `t_id`参照`teacher`表中的`t_id`。

请在`MySQL`数据库管理系统中完成以下操作:

- (1) 创建`college`数据库。(2分)
- (2) 在该`college`中创建以上6个表，数据类型和长度自定。(16分)
- (3) 在`teacher`表中新增一个字段`job`表示`teacher`的职位。(4分)
- (4) 删除`department`表中的`description`字段。(4分)
- (5) 在`student`表中的`spe_id`上构建普通索引。(4分)

## 二、数据操纵(24分)

在完成数据定义的基础上，继续在`college`数据库中进行以下操作:

- (1) 分别在下表中插入以下记录(12分)

`student`表

| s_id   | s_name   | gender   | spe_id   | birthday |
|----:|----:|----:|----:|----:| ----:|
| 20180201 | 黄庆 | 男 |  101  |  2000-10-1 |
| 20180210 | 张熊 | 男 |  101  |  2000-9-10 |
| 20180234 | 廖玲 | 女 |  101  |  2000-11-1 |
| 20180235 | 韩勇 | 男 |  201  |  1999-4-1 |

`specialty`表

| spe_id   | spe_name   | dept_id |
|----: |----: |----:|
| 101 | 管理信息系统| 001 |
| 102 | 电子商务| 001 |
| 201 | 商务新闻| 002 |

`department`表

| dept_id   | dept_name   | fund |  building |
|----: |----: |----:|----:|
| 001 | 管理学院| 500000 | IS001|
| 002 | 人文学院| 100000 | IS002|

- (2) 更新`department`表的`'人文学院'`的`fund`：在原来的`fund`值的基础上再增加`10000`。(4分)
- (3) 删除`department`表中的`'人文学院'`记录行。(8分)

## 三、数据查询(46分)

> 导入mis.sql文件，创建数据库mis，观测各数据表的结构和数据，然后完成以下查询任务

- (1) 查询所有获得奖学金的学生的学号、姓名、性别、出生年份、奖学金。(4分)

- (2) 查询所有获得一等奖学金的学生记录，按出生月份升序排序。(4分)

- (3) 查询各专业的奖学金总额，**剔除**未获取奖学金的专业，返回专业编号和奖学金总额，并按奖学金总额降序排序。(8分)

- (4) 查询学生表中专业编号为`'01'`的姓王或姓李的学生记录, **要求显示学号、姓名、性别和奖学金字段。**(4分)

- (5) 查询学生表中各专业的奖学金平均值（别名为 奖学金均值）和各专业人数（别名为 人数），**要求显示奖学金总额在2000元以上的专业名称和奖学金均值及各专业人数。**(8分)

- (6) 查询`'02'、'04'、'09'`和`'15'`等专业中的05级学生记录，显示第4条记录到第8条记录。(4分)

- (7) 查询各位学生的平均分，返回学号、学生姓名和平均成绩，按平均分从高到低排序，返回前10个记录。(7分)

- (8) 查询各门课程的不及格人数，返回课程号、课程名称和不及格人数，按不及格人数从高到低排序，返回前10个记录。(7分)
